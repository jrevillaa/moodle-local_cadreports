define("local_cadreports/dynamic_groups",["jquery","core/ajax","core/notification"],(function($,Ajax,Notification){var DynamicGroups={init:function(){var courseSelect=$("#id_courseids");courseSelect.on("change",(function(){DynamicGroups.updateGroupOptions(courseSelect.val())})),courseSelect.val()&&courseSelect.val().length>0&&DynamicGroups.updateGroupOptions(courseSelect.val())},updateGroupOptions:function(selectedCourses){var groupSelect=$("#id_groupids");selectedCourses&&0!==selectedCourses.length?(DynamicGroups.loadGroupsForCourses(selectedCourses,groupSelect),DynamicGroups.updatePlaceholder(groupSelect,"Cargando grupos...")):(DynamicGroups.clearGroupOptions(groupSelect),DynamicGroups.updatePlaceholder(groupSelect,"Selecciona primero uno o m√°s cursos"))},clearGroupOptions:function(groupSelect){groupSelect.empty(),groupSelect.prop("disabled",!0)},updatePlaceholder:function(groupSelect,text){var container=groupSelect.closest(".form-autocomplete-container");container.length&&container.find(".form-autocomplete-original-text").attr("placeholder",text)},loadGroupsForCourses:function(courseIds,groupSelect){var courseIdsInt=courseIds.map((function(id){return parseInt(id,10)}));Ajax.call([{methodname:"local_cadreports_get_groups_for_courses",args:{courseids:courseIdsInt},done:function(groups){DynamicGroups.populateGroupSelect(groupSelect,groups)},fail:function(error){Notification.exception(error),DynamicGroups.clearGroupOptions(groupSelect),DynamicGroups.updatePlaceholder(groupSelect,"Error cargando grupos")}}])},populateGroupSelect:function(groupSelect,groups){groupSelect.empty(),0===groups.length?(groupSelect.prop("disabled",!0),DynamicGroups.updatePlaceholder(groupSelect,"No hay grupos en los cursos seleccionados")):($.each(groups,(function(index,group){var option=new Option(group.name+" ("+group.coursename+")",group.id,!1,!1);groupSelect.append(option)})),groupSelect.prop("disabled",!1),DynamicGroups.updatePlaceholder(groupSelect,"Buscar y seleccionar grupos..."),groupSelect.trigger("change.select2"))}};return DynamicGroups}));

//# sourceMappingURL=dynamic_groups.min.js.map