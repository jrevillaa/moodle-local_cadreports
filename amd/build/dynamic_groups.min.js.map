{"version":3,"file":"dynamic_groups.min.js","sources":["../src/dynamic_groups.js"],"sourcesContent":["/**\n * AMD module para autocomplete dinámico de grupos\n * Plugin local_cadreports para Moodle 4.4\n */\n\ndefine(['jquery'], function($) {\n\n    var DynamicGroups = {\n\n        /**\n         * Inicializar autocomplete dinámico\n         */\n        init: function() {\n            var courseSelect = $('#id_courseids');\n\n            // Escuchar cambios en la selección de cursos\n            courseSelect.on('change', function() {\n                DynamicGroups.updateGroupsAutocomplete(courseSelect.val());\n            });\n        },\n\n        /**\n         * Actualizar configuración de autocomplete de grupos\n         * @param {Array} selectedCourses Array de IDs de cursos seleccionados\n         */\n        updateGroupsAutocomplete: function(selectedCourses) {\n            var groupSelect = $('#id_groupids');\n            var autocompleteContainer, inputElement;\n\n            if (!selectedCourses || selectedCourses.length === 0) {\n                // Sin cursos seleccionados - deshabilitar grupos\n                groupSelect.prop('disabled', true);\n                groupSelect.empty();\n\n                // Actualizar placeholder\n                autocompleteContainer = groupSelect.closest('.form-autocomplete-container');\n                if (autocompleteContainer.length) {\n                    inputElement = autocompleteContainer.find('.form-autocomplete-original-text');\n                    inputElement.attr('placeholder', 'Selecciona primero uno o más cursos');\n                }\n            } else {\n                // Con cursos seleccionados - habilitar y configurar AJAX\n                groupSelect.prop('disabled', false);\n\n                // Actualizar placeholder\n                autocompleteContainer = groupSelect.closest('.form-autocomplete-container');\n                if (autocompleteContainer.length) {\n                    inputElement = autocompleteContainer.find('.form-autocomplete-original-text');\n                    inputElement.attr('placeholder', 'Buscar grupos en cursos seleccionados...');\n                }\n\n                // Pasar courseids como parámetro adicional al AJAX\n                var ajaxConfig = groupSelect.data('ajax');\n                if (ajaxConfig) {\n                    // Agregar courseids a los parámetros AJAX\n                    ajaxConfig.data = ajaxConfig.data || {};\n                    ajaxConfig.data.courseids = selectedCourses;\n                }\n            }\n        }\n    };\n\n    return DynamicGroups;\n});\n"],"names":["define","$","DynamicGroups","init","courseSelect","on","updateGroupsAutocomplete","val","selectedCourses","autocompleteContainer","groupSelect","length","prop","closest","find","attr","ajaxConfig","data","courseids","empty"],"mappings":"AAKAA,yCAAO,CAAC,WAAW,SAASC,OAEpBC,cAAgB,CAKhBC,KAAM,eACEC,aAAeH,EAAE,iBAGrBG,aAAaC,GAAG,UAAU,WACtBH,cAAcI,yBAAyBF,aAAaG,WAQ5DD,yBAA0B,SAASE,qBAE3BC,sBADAC,YAAcT,EAAE,mBAGfO,iBAA8C,IAA3BA,gBAAgBG,OAWjC,CAEHD,YAAYE,KAAK,YAAY,IAG7BH,sBAAwBC,YAAYG,QAAQ,iCAClBF,QACPF,sBAAsBK,KAAK,oCAC7BC,KAAK,cAAe,gDAIjCC,WAAaN,YAAYO,KAAK,QAC9BD,aAEAA,WAAWC,KAAOD,WAAWC,MAAQ,GACrCD,WAAWC,KAAKC,UAAYV,sBAzBhCE,YAAYE,KAAK,YAAY,GAC7BF,YAAYS,SAGZV,sBAAwBC,YAAYG,QAAQ,iCAClBF,QACPF,sBAAsBK,KAAK,oCAC7BC,KAAK,cAAe,gDAwB1Cb"}